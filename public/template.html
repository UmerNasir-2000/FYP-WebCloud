<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="landingstyle.css" />
    <title>Web Cloud | Project Template</title>
    <script type="text/javascript" src="/jquery/jquery.min.js"></script>

    <script type="text/javascript">
      $(document).ready(function () {
        var user = localStorage.getItem("name");
        var pic = localStorage.getItem("url");
        $("#uname").text(user);
        $("#mypic").text(pic);
        $("#mypic").empty();

        let tr = `
  <img id="mypic" src=${pic} class='avatar'  alt="Avatar">
  `;

        $("#mypic").append(tr);

        $("#logout").click(function () {
          localStorage.removeItem("token");
          localStorage.removeItem("name");
          localStorage.removeItem("url");
          const wholeURL = `${window.location.protocol}//${window.location.host}/index.html`;
          window.location.replace(wholeURL);

          //window.location.href = "index.html";
        });

        $("#mybody").hide();
        if (localStorage.getItem("token")) {
          $("#mybody").show();
        } else if (!localStorage.getItem("token")) {
          window.location.href = "index.html";
          alert("User Need to Login First");
        }

        $("#register").click(function () {
          var project_name = $("#project_name").val();

          var db_engine = $("#db_engine").val();
          var web_framework = $("#web_framework").val();
          console.log(project_name, db_engine, web_framework);
          $.ajax({
            url: `/api/auth/submit-template`,
            method: "POST",

            data: {
              project_name: project_name,
              db_engine: db_engine,
              web_framework: web_framework,
            },
            success: function (result, status, xhr) {
              // alert(JSON.stringify(xhr.responseJSON));
              localStorage.setItem(
                "project_name",
                xhr.responseJSON.project.project_name
              );

              window.location.href = "instruction.html";
            },
            error: function (xhr, status, error) {
              alert(xhr.responseText);
            },
          });
          $(".error").remove();

          if (project_name.length < 1) {
            $("#project_name").before(
              '<span style="color: red;" class="error">This field is required</span>'
            );
          }
        });
        $("#UnitListNew").bind("change", function () {
          if ($(this).is(":checked")) {
            checkFlag = 1;
            $("#db_engine").show();
            $(".form-check-label").show();
          } else {
            checkFlag = 0;
            $("#db_engine").hide();
            $(".form-check-label").show();
          }
        });
      });
    </script>
  </head>
  <body id="mybody">
    <nav
      class="navbar navbar-light"
      style="
        background-color: rgb(15, 23, 36);
        align-content: space-between;
        padding: 10px;
      "
    >
      <h1
        class="display-6"
        style="font-size: 40px; color: white; font-weight: bolder"
      >
        <a href="landing.html" style="text-decoration: none; color: white">
          &lt;/&gt;WebCloud
        </a>
      </h1>
      <ul class="navbar-nav" style="flex-direction: row">
        <li>
          <a id="mypic" href=""></a>

          <button
            id="uname"
            class="btn btn-success"
            style="
              background-color: rgb(15, 23, 36);
              border-width: 2px;
              pointer-events: none;
            "
          ></button>

          <button
            class="btn"
            style="background-color: rgb(15, 23, 36); border-width: 2px"
            id="logout"
          >
            <a style="color: rgba(255, 0, 0, 0.671)" target="_blank">LOGOUT</a>
          </button>
        </li>
      </ul>
    </nav>

    <div class="login-page">
      <div class="form">
        <form class="register-form">
          <input
            style="margin: 0 0 15px; padding: 10px; font-size: 15px"
            type="text"
            name="project_name"
            placeholder="Project Name"
            id="project_name"
            required
          />

          <div class="select" style="text-align: center">
            <select
              class="standard-select"
              name="web_framework"
              id="web_framework"
            >
              <option value="NODEJS">NODEJS</option>
              <option value="PHP">PHP</option>
            </select>
            <span class="focus"></span>
          </div>

          <div class="form-check" style="display: flex">
            <form>
              <div style="margin-top: -30px; margin-bottom: 2s0px">
                <label
                  for="UnitListNew"
                  style="
                    color: aliceblue;
                    display: block;
                    padding-left: 15px;
                    text-indent: -15px;
                  "
                >
                  <input
                    type="checkbox"
                    checked="checked"
                    id="UnitListNew"
                    style="
                      width: 13px;
                      height: 20px;
                      padding: 0;
                      margin: 0;
                      vertical-align: bottom;
                      position: relative;
                      top: -1px;
                      *overflow: hidden;
                    "
                  />
                  Enable Database
                </label>
              </div>
            </form>

            <dl class="fildLine mr">
              <dd>
                <div class="select" style="text-align: center">
                  <select
                    class="standard-select"
                    name="db_engine"
                    id="db_engine"
                  >
                    <option value="MySQL">MySQL</option>
                    <option value="NoSQL">NoSQL</option>
                  </select>
                  <span class="focus"></span>
                </div>
              </dd>
            </dl>
          </div>

          <button type="button" id="register" class="btn">
            Create Project
          </button>
        </form>
      </div>
    </div>
    <section class="footer">
      <div class="box-container">
        <div class="box">
          <h3>Why choose us?</h3>
          <p>You can code any where any time without environmental setup</p>
        </div>

        <div class="box">
          <h3>Quick Links</h3>
          <a style="text-decoration: none" href="landing.html">home</a>
          <a style="text-decoration: none" href="userguide.html">about</a>
          <a style="text-decoration: none" href="#">contact</a>
          <a style="text-decoration: none" href="userguide.html">FAQ</a>
        </div>

        <div class="box">
          <h3>Contact Us</h3>
          <p><i class="fas fa-map-marker-alt"></i>SZABIST 100</p>
          <p><i class="fas fa-globe"></i> www.webcloud.com</p>
          <p><i class="fas fa-phone"></i> +123-456-7890.</p>
        </div>
      </div>

      <h1 class="credit">
        Created By
        <a style="text-decoration: none" href="#">Umer And Wahaj</a> | &#169;
        All Rights Reserved.
      </h1>
    </section>
  </body>
</html>
